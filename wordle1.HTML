<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Worlde PlayStation</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Arial', sans-serif;
        }
        
        body {
            background: linear-gradient(to bottom, #0c1445, #1a1a2e);
            color: #fff;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }
        
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(white, rgba(255,255,255,.2) 2px, transparent 4px),
                radial-gradient(white, rgba(255,255,255,.15) 1px, transparent 3px),
                radial-gradient(white, rgba(255,255,255,.1) 2px, transparent 4px);
            background-size: 550px 550px, 350px 350px, 250px 250px;
            background-position: 0 0, 40px 60px, 130px 270px;
            z-index: -1;
        }
        
        .container {
            max-width: 500px;
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        .titulo-container {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
            width: 100%;
        }
        
        .playstation-logo {
            width: 40px;
            height: 40px;
            margin-right: 15px;
        }
        
        h1 {
            margin: 0;
            font-size: 2.5rem;
            text-align: center;
            color: #fff;
            text-shadow: 0 0 10px #3d7bff, 0 0 20px #3d7bff;
        }
        
        .stats {
            display: flex;
            justify-content: center;
            gap: 15px;
            width: 100%;
            margin-bottom: 20px;
        }
        
        .stat {
            background-color: rgba(30, 30, 60, 0.8);
            border-radius: 8px;
            padding: 12px;
            text-align: center;
            flex: 1;
            max-width: 130px;
            box-shadow: 0 0 10px rgba(61, 123, 255, 0.3);
        }
        
        .acertijo {
            background-color: rgba(30, 30, 60, 0.8);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 25px;
            text-align: center;
            width: 100%;
            box-shadow: 0 0 15px rgba(61, 123, 255, 0.5);
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1rem;
        }
        
        .tablero {
            display: grid;
            grid-template-rows: repeat(7, 1fr);
            gap: 10px;
            width: 100%;
            margin-bottom: 25px;
        }
        
        .fila {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
        }
        
        .letra {
            width: 100%;
            aspect-ratio: 1/1;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            font-weight: bold;
            background-color: rgba(50, 50, 80, 0.6);
            border: 2px solid #3d7bff;
            border-radius: 8px;
            color: white;
            text-transform: uppercase;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .teclado {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            width: 100%;
            margin-top: 20px;
        }
        
        .fila-teclado {
            display: flex;
            justify-content: center;
            gap: 6px;
            width: 100%;
        }
        
        .tecla {
            min-width: 32px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: rgba(61, 123, 255, 0.3);
            border: none;
            border-radius: 6px;
            color: white;
            font-weight: bold;
            font-size: 1rem;
            cursor: pointer;
            transition: background-color 0.2s;
            flex: 1;
            max-width: 45px;
        }
        
        .tecla:hover {
            background-color: rgba(61, 123, 255, 0.5);
        }
        
        .tecla-grande {
            min-width: 65px;
            flex: 1.5;
        }
        
        .correcta {
            background-color: #2ecc71;
            border-color: #2ecc71;
        }
        
        .presente {
            background-color: #f1c40f;
            border-color: #f1c40f;
        }
        
        .ausente {
            background-color: #7f8c8d;
            border-color: #7f8c8d;
        }
        
        .animacion {
            animation: flip 0.5s ease forwards;
        }
        
        @keyframes flip {
            0% {
                transform: scaleY(1);
            }
            50% {
                transform: scaleY(0);
            }
            100% {
                transform: scaleY(1);
            }
        }
        
        .mensaje {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(30, 30, 60, 0.95);
            padding: 30px;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 0 20px rgba(61, 123, 255, 0.8);
            z-index: 100;
            display: none;
            width: 90%;
            max-width: 400px;
        }
        
        .mensaje button {
            margin-top: 20px;
            padding: 12px 24px;
            background-color: #3d7bff;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            font-size: 1rem;
        }
        
        .intentos {
            margin-top: 10px;
            font-size: 1.2rem;
            text-align: center;
        }
        
        .boton-reinicio {
            margin-top: 25px;
            padding: 12px 24px;
            background-color: #3d7bff;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            font-size: 1rem;
        }
        
        /* Campo de entrada oculto para teclado móvil */
        .input-movil {
            position: absolute;
            opacity: 0;
            pointer-events: none;
            height: 0;
            width: 0;
        }
        
        /* Modal de reglas */
        .modal-reglas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(12, 20, 69, 0.95);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 20px;
        }
        
        .contenido-modal {
            background: linear-gradient(to bottom, #1a1a2e, #0c1445);
            border-radius: 15px;
            padding: 30px;
            max-width: 500px;
            width: 100%;
            box-shadow: 0 0 30px rgba(61, 123, 255, 0.8);
            border: 2px solid #3d7bff;
            text-align: center;
        }
        
        .contenido-modal h2 {
            font-size: 2rem;
            margin-bottom: 20px;
            color: #fff;
            text-shadow: 0 0 10px #3d7bff;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .reglas-lista {
            text-align: left;
            margin: 20px 0;
            padding: 0 20px;
        }
        
        .reglas-lista li {
            margin-bottom: 15px;
            line-height: 1.5;
        }
        
        .ejemplos {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin: 25px 0;
        }
        
        .ejemplo {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .ejemplo-letra {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2rem;
            border-radius: 6px;
        }
        
        .ejemplo-texto {
            flex: 1;
            text-align: left;
        }
        
        .boton-empezar {
            margin-top: 20px;
            padding: 12px 30px;
            background-color: #3d7bff;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            font-size: 1.1rem;
            transition: all 0.3s;
        }
        
        .boton-empezar:hover {
            background-color: #2a5bc9;
            transform: scale(1.05);
        }
        
        @media (max-width: 500px) {
            .tecla {
                min-width: 28px;
                height: 45px;
                font-size: 0.9rem;
                max-width: 40px;
            }
            
            .tecla-grande {
                min-width: 55px;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .letra {
                font-size: 1.5rem;
            }
            
            .stats {
                flex-direction: column;
                align-items: center;
                gap: 10px;
            }
            
            .stat {
                margin: 0;
                width: 100%;
                max-width: 200px;
            }
            
            .acertijo {
                padding: 15px;
                font-size: 1rem;
            }
            
            .contenido-modal {
                padding: 20px;
            }
            
            .contenido-modal h2 {
                font-size: 1.7rem;
            }
            
            .reglas-lista {
                padding: 0 10px;
            }
            
            .ejemplo-letra {
                width: 35px;
                height: 35px;
                font-size: 1rem;
            }
        }
    </style>
</head>
<body>
    <!-- Modal de reglas -->
    <div class="modal-reglas" id="modal-reglas">
        <div class="contenido-modal">
            <h2>
                <svg class="playstation-logo" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                    <path d="M65.6 27.2L45.4 37.5l-7.3-4.2v38.5l7.3 4.2 20.2-10.3 7.3-4.2V31.4l-7.3-4.2zm-40.2 0L5.2 37.5 0 41v27.3l5.2 3.5 20.2 10.3 7.3 4.2V31.4l-7.3-4.2zM71.9 80l-7.3-4.2V47.9l7.3-4.2 15.6 7.9 5.2 3.5v27.3l-5.2 3.5L71.9 80z" fill="#fff"/>
                </svg>
                WORLDE PLAYSTATION
            </h2>
            
            <p>Adivina la palabra de 5 letras en 7 intentos.</p>
            
            <div class="reglas-lista">
                <ol>
                    <li>Cada intento debe ser una palabra válida de 5 letras.</li>
                    <li>Después de cada intento, el color de las letras cambiará para mostrar qué tan cerca estás de acertar la palabra.</li>
                    <li>Resuelve el acertijo para obtener una pista sobre la palabra.</li>
                </ol>
            </div>
            
            <h3>Ejemplos</h3>
            
            <div class="ejemplos">
                <div class="ejemplo">
                    <div class="ejemplo-letra correcta">L</div>
                    <div class="ejemplo-texto">La letra <strong>L</strong> está en la palabra y en la posición correcta.</div>
                </div>
                
                <div class="ejemplo">
                    <div class="ejemplo-letra presente">L</div>
                    <div class="ejemplo-texto">La letra <strong>L</strong> está en la palabra pero en la posición incorrecta.</div>
                </div>
                
                <div class="ejemplo">
                    <div class="ejemplo-letra ausente">L</div>
                    <div class="ejemplo-texto">La letra <strong>L</strong> no está en la palabra.</div>
                </div>
            </div>
            
            <button class="boton-empezar" id="empezar-btn">¡Empezar a jugar!</button>
        </div>
    </div>
    
    <!-- Campo de entrada oculto para teclado móvil -->
    <input type="text" class="input-movil" id="input-movil" maxlength="1" />
    
    <div class="container">
        <div class="titulo-container">
            <svg class="playstation-logo" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                <path d="M65.6 27.2L45.4 37.5l-7.3-4.2v38.5l7.3 4.2 20.2-10.3 7.3-4.2V31.4l-7.3-4.2zm-40.2 0L5.2 37.5 0 41v27.3l5.2 3.5 20.2 10.3 7.3 4.2V31.4l-7.3-4.2zM71.9 80l-7.3-4.2V47.9l7.3-4.2 15.6 7.9 5.2 3.5v27.3l-5.2 3.5L71.9 80z" fill="#fff"/>
            </svg>
            <h1>WORLDE PLAYSTATION</h1>
        </div>
        
        <div class="stats">
            <div class="stat">Acertijos: <span id="contador-acertijos">0</span></div>
            <div class="stat">Resueltos: <span id="contador-resueltos">0</span></div>
            <div class="stat">Intentos: <span id="contador-intentos">0/7</span></div>
        </div>
        
        <div class="acertijo" id="acertijo">
            <!-- El acertijo se insertará aquí -->
        </div>
        
        <div class="tablero" id="tablero">
            <!-- Las filas y letras se generarán con JS -->
        </div>
        
        <div class="teclado" id="teclado">
            <div class="fila-teclado">
                <div class="tecla" data-tecla="Q">Q</div>
                <div class="tecla" data-tecla="W">W</div>
                <div class="tecla" data-tecla="E">E</div>
                <div class="tecla" data-tecla="R">R</div>
                <div class="tecla" data-tecla="T">T</div>
                <div class="tecla" data-tecla="Y">Y</div>
                <div class="tecla" data-tecla="U">U</div>
                <div class="tecla" data-tecla="I">I</div>
                <div class="tecla" data-tecla="O">O</div>
                <div class="tecla" data-tecla="P">P</div>
            </div>
            <div class="fila-teclado">
                <div class="tecla" data-tecla="A">A</div>
                <div class="tecla" data-tecla="S">S</div>
                <div class="tecla" data-tecla="D">D</div>
                <div class="tecla" data-tecla="F">F</div>
                <div class="tecla" data-tecla="G">G</div>
                <div class="tecla" data-tecla="H">H</div>
                <div class="tecla" data-tecla="J">J</div>
                <div class="tecla" data-tecla="K">K</div>
                <div class="tecla" data-tecla="L">L</div>
                <div class="tecla" data-tecla="Ñ">Ñ</div>
            </div>
            <div class="fila-teclado">
                <div class="tecla tecla-grande" data-tecla="ENTER">ENTER</div>
                <div class="tecla" data-tecla="Z">Z</div>
                <div class="tecla" data-tecla="X">X</div>
                <div class="tecla" data-tecla="C">C</div>
                <div class="tecla" data-tecla="V">V</div>
                <div class="tecla" data-tecla="B">B</div>
                <div class="tecla" data-tecla="N">N</div>
                <div class="tecla" data-tecla="M">M</div>
                <div class="tecla tecla-grande" data-tecla="DELETE">⌫</div>
            </div>
        </div>
        
        <button class="boton-reinicio" id="reiniciar-btn">Reiniciar Juego</button>
    </div>
    
    <div class="mensaje" id="mensaje">
        <h2 id="mensaje-titulo">¡Felicidades!</h2>
        <p id="mensaje-texto">Has acertado la palabra</p>
        <button id="siguiente-btn">Siguiente Acertijo</button>
    </div>

    <script>
        // Base de datos de acertijos y palabras (todas de 5 letras)
        const todosAcertijos = [
            {
                pista: "Dientes sin boca, metal que obedece; en puertas y candados, siempre aparece.",
                palabra: "LLAVE"
            },
            {
                pista: "Vigilo en la altura, cargo sin protesta; mi cuello es bandera de calma andina y fiesta.",
                palabra: "LLAMA"
            },
            {
                pista: "Entre agujeros guardo el sabor; me rallo, me fundo y alegro el fogón.",
                palabra: "QUESO"
            },
            {
                pista: "Pequeño bigote, oído fino; corro en silencio por mi camino.",
                palabra: "RATON"
            },
            {
                pista: "Tiene agujas y no sabe coser, tiene números y no sabe leer",
                palabra: "RELOJ"
            },
            {
                pista: "Entre puentes y museos veo pasar al Sena, una torre de hierro me señala la escena. Soy moda y luz de noche, susurro en mi país; si piensas en Francia, me llamas en cinco: ¿quién es?",
                palabra: "PARIS"
            },
            {
                pista: "Me usan para escribir, aunque no tengo voz. Soy de tinta o de mina, ¿ya sabes quién soy?",
                palabra: "LAPIZ"
            },
            {
                pista: "Vuelo sin tener alas, lloro sin tener ojos, y si me buscas, en el cielo me alojas.",
                palabra: "NUBES"
            }
        ];
        
        // Variables de estado del juego
        let acertijosDisponibles = [];
        let acertijoActual = null;
        let palabraActual = "";
        let intentoActual = 0;
        let posicionActual = 0;
        let juegoTerminado = false;
        let acertijosMostrados = 0;
        let acertijosResueltos = 0;
        
        // Elementos DOM
        const tablero = document.getElementById("tablero");
        const acertijoElement = document.getElementById("acertijo");
        const teclado = document.getElementById("teclado");
        const mensaje = document.getElementById("mensaje");
        const mensajeTitulo = document.getElementById("mensaje-titulo");
        const mensajeTexto = document.getElementById("mensaje-texto");
        const siguienteBtn = document.getElementById("siguiente-btn");
        const reiniciarBtn = document.getElementById("reiniciar-btn");
        const contadorIntentos = document.getElementById("contador-intentos");
        const contadorAcertijos = document.getElementById("contador-acertijos");
        const contadorResueltos = document.getElementById("contador-resueltos");
        const inputMovil = document.getElementById("input-movil");
        const modalReglas = document.getElementById("modal-reglas");
        const empezarBtn = document.getElementById("empezar-btn");
        
        // Inicializar el juego
        function inicializarJuego() {
            // Ocultar modal de reglas
            modalReglas.style.display = "none";
            
            // Reiniciar acertijos disponibles
            acertijosDisponibles = [...todosAcertijos];
            acertijosMostrados = 0;
            acertijosResueltos = 0;
            
            // Actualizar contadores
            contadorAcertijos.textContent = acertijosMostrados;
            contadorResueltos.textContent = acertijosResueltos;
            
            // Seleccionar siguiente acertijo
            seleccionarSiguienteAcertijo();
        }
        
        // Seleccionar un acertijo que no se haya mostrado
        function seleccionarSiguienteAcertijo() {
            if (acertijosDisponibles.length === 0) {
                // Si no hay más acertijos disponibles
                juegoTerminado = true;
                mensajeTitulo.textContent = "¡Felicidades!";
                mensajeTexto.textContent = "Has completado todos los acertijos. ¡Juego terminado!";
                siguienteBtn.style.display = "none";
                mensaje.style.display = "block";
                return;
            }
            
            // Seleccionar un acertijo aleatorio de los disponibles
            const indiceAleatorio = Math.floor(Math.random() * acertijosDisponibles.length);
            acertijoActual = acertijosDisponibles[indiceAleatorio];
            palabraActual = acertijoActual.palabra;
            
            // Eliminar el acertijo de los disponibles
            acertijosDisponibles.splice(indiceAleatorio, 1);
            
            // Mostrar el acertijo
            acertijoElement.textContent = acertijoActual.pista;
            
            // Reiniciar variables
            intentoActual = 0;
            posicionActual = 0;
            juegoTerminado = false;
            contadorIntentos.textContent = "Intentos: 0/7";
            
            // Incrementar contador de acertijos mostrados
            acertijosMostrados++;
            contadorAcertijos.textContent = acertijosMostrados;
            
            // Limpiar el tablero
            tablero.innerHTML = "";
            
            // Crear las filas y letras
            for (let i = 0; i < 7; i++) {
                const fila = document.createElement("div");
                fila.className = "fila";
                
                for (let j = 0; j < 5; j++) {
                    const letra = document.createElement("div");
                    letra.className = "letra";
                    letra.dataset.fila = i;
                    letra.dataset.col = j;
                    
                    // Agregar evento para abrir teclado en móviles
                    letra.addEventListener('click', () => {
                        if (!juegoTerminado && intentoActual === i && posicionActual >= j) {
                            inputMovil.focus();
                        }
                    });
                    
                    fila.appendChild(letra);
                }
                
                tablero.appendChild(fila);
            }
            
            // Reiniciar teclado
            document.querySelectorAll('.tecla').forEach(tecla => {
                tecla.classList.remove('correcta', 'presente', 'ausente');
            });
            
            // Ocultar mensaje
            mensaje.style.display = "none";
            
            // Configurar event listeners para el teclado virtual
            document.querySelectorAll(".tecla").forEach(tecla => {
                tecla.addEventListener("click", () => {
                    if (juegoTerminado) return;
                    
                    const letra = tecla.dataset.tecla;
                    
                    if (letra === "ENTER") {
                        comprobarPalabra();
                    } else if (letra === "DELETE") {
                        eliminarLetra();
                    } else {
                        agregarLetra(letra);
                    }
                });
            });
            
            // Configurar event listener para el teclado físico
            document.addEventListener("keydown", manejarTeclado);
            
            // Configurar event listener para el input móvil
            inputMovil.addEventListener('input', manejarInputMovil);
        }
        
        // Manejar eventos del teclado físico
        function manejarTeclado(e) {
            if (juegoTerminado) return;
            
            if (e.key === "Enter") {
                comprobarPalabra();
            } else if (e.key === "Backspace") {
                eliminarLetra();
            } else if (/^[A-Za-zñÑ]$/.test(e.key)) {
                agregarLetra(e.key.toUpperCase());
            }
        }
        
        // Manejar entrada desde el teclado móvil
        function manejarInputMovil(e) {
            if (juegoTerminado) return;
            
            const letra = e.data;
            if (letra && /^[A-Za-zñÑ]$/i.test(letra)) {
                agregarLetra(letra.toUpperCase());
            }
            
            // Limpiar el input después de usarlo
            inputMovil.value = '';
        }
        
        // Agregar una letra al tablero
        function agregarLetra(letra) {
            if (posicionActual < 5 && intentoActual < 7) {
                const casilla = document.querySelector(`.letra[data-fila="${intentoActual}"][data-col="${posicionActual}"]`);
                casilla.textContent = letra;
                posicionActual++;
            }
        }
        
        // Eliminar una letra del tablero
        function eliminarLetra() {
            if (posicionActual > 0) {
                posicionActual--;
                const casilla = document.querySelector(`.letra[data-fila="${intentoActual}"][data-col="${posicionActual}"]`);
                casilla.textContent = "";
            }
        }
        
        // Comprobar si la palabra es correcta
        function comprobarPalabra() {
            if (posicionActual !== 5) {
                alert("¡Completa la palabra antes de enviar!");
                return;
            }
            
            const fila = document.querySelectorAll(`.fila:nth-child(${intentoActual + 1}) .letra`);
            let palabraIntento = "";
            
            // Obtener la palabra del intento actual
            for (let i = 0; i < 5; i++) {
                palabraIntento += fila[i].textContent;
            }
            
            // Crear arrays para el resultado
            let resultado = new Array(5).fill('ausente');
            let letrasObjetivo = palabraActual.split('');
            let letrasIntento = palabraIntento.split('');
            
            // Primera pasada: encontrar letras correctas (verde)
            for (let i = 0; i < 5; i++) {
                if (letrasIntento[i] === letrasObjetivo[i]) {
                    resultado[i] = 'correcta';
                    letrasObjetivo[i] = null; // Marcamos como usada
                }
            }
            
            // Segunda pasada: encontrar letras presentes pero en posición incorrecta (amarillo)
            for (let i = 0; i < 5; i++) {
                if (resultado[i] === 'correcta') continue;
                
                const index = letrasObjetivo.indexOf(letrasIntento[i]);
                if (index !== -1) {
                    resultado[i] = 'presente';
                    letrasObjetivo[index] = null; // Marcamos como usada
                }
            }
            
            // Aplicar los resultados con animación
            for (let i = 0; i < 5; i++) {
                const letra = fila[i].textContent;
                
                // Aplicar animación y color después de un delay
                setTimeout(() => {
                    fila[i].classList.add("animacion", resultado[i]);
                    
                    // Actualizar teclado virtual
                    const tecla = document.querySelector(`.tecla[data-tecla="${letra}"]`);
                    if (!tecla.classList.contains("correcta")) {
                        if (resultado[i] === 'correcta') {
                            tecla.classList.remove("presente", "ausente");
                            tecla.classList.add("correcta");
                        } else if (resultado[i] === 'presente' && !tecla.classList.contains("correcta")) {
                            tecla.classList.remove("ausente");
                            tecla.classList.add("presente");
                        } else if (resultado[i] === 'ausente' && !tecla.classList.contains("correcta") && !tecla.classList.contains("presente")) {
                            tecla.classList.add("ausente");
                        }
                    }
                }, i * 300);
            }
            
            // Actualizar contador de intentos
            intentoActual++;
            contadorIntentos.textContent = `Intentos: ${intentoActual}/7`;
            
            // Comprobar si ganó o perdió
            if (palabraIntento === palabraActual) {
                setTimeout(() => {
                    juegoTerminado = true;
                    acertijosResueltos++;
                    contadorResueltos.textContent = acertijosResueltos;
                    
                    mensajeTitulo.textContent = "¡Felicidades!";
                    mensajeTexto.textContent = `Has acertado la palabra "${palabraActual}" en ${intentoActual} intento${intentoActual > 1 ? 's' : ''}.`;
                    siguienteBtn.style.display = "block";
                    mensaje.style.display = "block";
                }, 2000);
            } else if (intentoActual === 7) {
                setTimeout(() => {
                    juegoTerminado = true;
                    mensajeTitulo.textContent = "¡Game Over!";
                    mensajeTexto.textContent = `La palabra era "${palabraActual}". ¡Inténtalo de nuevo!`;
                    siguienteBtn.style.display = "block";
                    mensaje.style.display = "block";
                }, 2000);
            } else {
                // Preparar para el siguiente intento
                setTimeout(() => {
                    posicionActual = 0;
                }, 2000);
            }
        }
        
        // Configurar botón para siguiente acertijo
        siguienteBtn.addEventListener("click", () => {
            mensaje.style.display = "none";
            seleccionarSiguienteAcertijo();
        });
        
        // Configurar botón para reiniciar juego
        reiniciarBtn.addEventListener("click", inicializarJuego);
        
        // Configurar botón para empezar a jugar
        empezarBtn.addEventListener("click", inicializarJuego);
        
        // Mostrar modal de reglas al cargar la página
        window.addEventListener('load', () => {
            modalReglas.style.display = "flex";
        });
    </script>
</body>
</html>