<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Worlde PlayStation</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Arial', sans-serif;
        }
        
        body {
            background: linear-gradient(to bottom, #0c1445, #1a1a2e);
            color: #fff;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }
        
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(white, rgba(255,255,255,.2) 2px, transparent 4px),
                radial-gradient(white, rgba(255,255,255,.15) 1px, transparent 3px),
                radial-gradient(white, rgba(255,255,255,.1) 2px, transparent 4px);
            background-size: 550px 550px, 350px 350px, 250px 250px;
            background-position: 0 0, 40px 60px, 130px 270px;
            z-index: -1;
        }
        
        .container {
            max-width: 500px;
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .titulo-container {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 10px;
        }
        
        .playstation-logo {
            width: 40px;
            height: 40px;
            margin-right: 10px;
        }
        
        h1 {
            margin: 20px 0;
            font-size: 2.5rem;
            text-align: center;
            color: #fff;
            text-shadow: 0 0 10px #3d7bff, 0 0 20px #3d7bff;
        }
        
        .stats {
            display: flex;
            justify-content: space-between;
            width: 100%;
            margin-bottom: 15px;
        }
        
        .stat {
            background-color: rgba(30, 30, 60, 0.8);
            border-radius: 8px;
            padding: 10px;
            text-align: center;
            flex: 1;
            margin: 0 5px;
            box-shadow: 0 0 10px rgba(61, 123, 255, 0.3);
        }
        
        .acertijo {
            background-color: rgba(30, 30, 60, 0.8);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 20px;
            text-align: center;
            width: 100%;
            box-shadow: 0 0 15px rgba(61, 123, 255, 0.5);
            min-height: 70px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .tablero {
            display: grid;
            grid-template-rows: repeat(7, 1fr);
            gap: 8px;
            width: 100%;
            margin-bottom: 20px;
        }
        
        .fila {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 8px;
        }
        
        .letra {
            width: 100%;
            aspect-ratio: 1/1;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            font-weight: bold;
            background-color: rgba(50, 50, 80, 0.6);
            border: 2px solid #3d7bff;
            border-radius: 8px;
            color: white;
            text-transform: uppercase;
            transition: all 0.3s ease;
        }
        
        .teclado {
            display: flex;
            flex-direction: column;
            gap: 8px;
            width: 100%;
            margin-top: 20px;
        }
        
        .fila-teclado {
            display: flex;
            justify-content: center;
            gap: 6px;
        }
        
        .tecla {
            min-width: 30px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: rgba(61, 123, 255, 0.3);
            border: none;
            border-radius: 6px;
            color: white;
            font-weight: bold;
            font-size: 1rem;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .tecla:hover {
            background-color: rgba(61, 123, 255, 0.5);
        }
        
        .tecla-grande {
            min-width: 60px;
        }
        
        .correcta {
            background-color: #2ecc71;
            border-color: #2ecc71;
        }
        
        .presente {
            background-color: #f1c40f;
            border-color: #f1c40f;
        }
        
        .ausente {
            background-color: #7f8c8d;
            border-color: #7f8c8d;
        }
        
        .animacion {
            animation: flip 0.5s ease forwards;
        }
        
        @keyframes flip {
            0% {
                transform: scaleY(1);
            }
            50% {
                transform: scaleY(0);
            }
            100% {
                transform: scaleY(1);
            }
        }
        
        .mensaje {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(30, 30, 60, 0.95);
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 0 20px rgba(61, 123, 255, 0.8);
            z-index: 100;
            display: none;
        }
        
        .mensaje button {
            margin-top: 15px;
            padding: 10px 20px;
            background-color: #3d7bff;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
        }
        
        .intentos {
            margin-top: 10px;
            font-size: 1.2rem;
            text-align: center;
        }
        
        .boton-reinicio {
            margin-top: 15px;
            padding: 10px 20px;
            background-color: #3d7bff;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
        }
        
        @media (max-width: 500px) {
            .tecla {
                min-width: 25px;
                height: 45px;
                font-size: 0.9rem;
            }
            
            .tecla-grande {
                min-width: 50px;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .letra {
                font-size: 1.5rem;
            }
            
            .stats {
                flex-direction: column;
                gap: 10px;
            }
            
            .stat {
                margin: 0;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="titulo-container">
            <svg class="playstation-logo" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                <path d="M65.6 27.2L45.4 37.5l-7.3-4.2v38.5l7.3 4.2 20.2-10.3 7.3-4.2V31.4l-7.3-4.2zm-40.2 0L5.2 37.5 0 41v27.3l5.2 3.5 20.2 10.3 7.3 4.2V31.4l-7.3-4.2zM71.9 80l-7.3-4.2V47.9l7.3-4.2 15.6 7.9 5.2 3.5v27.3l-5.2 3.5L71.9 80z" fill="#fff"/>
            </svg>
            <h1>WORLDE PLAYSTATION</h1>
        </div>
        
        <div class="stats">
            <div class="stat">Acertijos: <span id="contador-acertijos">0</span></div>
            <div class="stat">Resueltos: <span id="contador-resueltos">0</span></div>
            <div class="stat">Intentos: <span id="contador-intentos">0/7</span></div>
        </div>
        
        <div class="acertijo" id="acertijo">
            <!-- El acertijo se insertará aquí -->
        </div>
        
        <div class="tablero" id="tablero">
            <!-- Las filas y letras se generarán con JS -->
        </div>
        
        <div class="teclado" id="teclado">
            <div class="fila-teclado">
                <div class="tecla" data-tecla="Q">Q</div>
                <div class="tecla" data-tecla="W">W</div>
                <div class="tecla" data-tecla="E">E</div>
                <div class="tecla" data-tecla="R">R</div>
                <div class="tecla" data-tecla="T">T</div>
                <div class="tecla" data-tecla="Y">Y</div>
                <div class="tecla" data-tecla="U">U</div>
                <div class="tecla" data-tecla="I">I</div>
                <div class="tecla" data-tecla="O">O</div>
                <div class="tecla" data-tecla="P">P</div>
            </div>
            <div class="fila-teclado">
                <div class="tecla" data-tecla="A">A</div>
                <div class="tecla" data-tecla="S">S</div>
                <div class="tecla" data-tecla="D">D</div>
                <div class="tecla" data-tecla="F">F</div>
                <div class="tecla" data-tecla="G">G</div>
                <div class="tecla" data-tecla="H">H</div>
                <div class="tecla" data-tecla="J">J</div>
                <div class="tecla" data-tecla="K">K</div>
                <div class="tecla" data-tecla="L">L</div>
                <div class="tecla" data-tecla="Ñ">Ñ</div>
            </div>
            <div class="fila-teclado">
                <div class="tecla tecla-grande" data-tecla="ENTER">ENTER</div>
                <div class="tecla" data-tecla="Z">Z</div>
                <div class="tecla" data-tecla="X">X</div>
                <div class="tecla" data-tecla="C">C</div>
                <div class="tecla" data-tecla="V">V</div>
                <div class="tecla" data-tecla="B">B</div>
                <div class="tecla" data-tecla="N">N</div>
                <div class="tecla" data-tecla="M">M</div>
                <div class="tecla tecla-grande" data-tecla="DELETE">⌫</div>
            </div>
        </div>
        
        <button class="boton-reinicio" id="reiniciar-btn">Reiniciar Juego</button>
    </div>
    
    <div class="mensaje" id="mensaje">
        <h2 id="mensaje-titulo">¡Felicidades!</h2>
        <p id="mensaje-texto">Has acertado la palabra</p>
        <button id="siguiente-btn">Siguiente Acertijo</button>
    </div>

    <script>
        // Base de datos de acertijos y palabras (todas de 5 letras)
        const todosAcertijos = [
            {
                pista: "Lo tienes que poner al revés para que funcione",
                palabra: "SACOS"
            },
            {
                pista: "Se hace sin manos y se rompe sin pies",
                palabra: "HUEVO"
            },
            {
                pista: "Blanco por dentro, verde por fuera. Si quieres que te lo diga, espera",
                palabra: "PERAS"
            },
            {
                pista: "Tiene ciudades pero no casas, tiene montañas pero no árboles, tiene agua pero no peces",
                palabra: "MAPAS"
            },
            {
                pista: "Tiene agujas y no sabe coser, tiene números y no sabe leer",
                palabra: "RELOJ"
            },
            {
                pista: "Blanco es, la gallina lo pone, con aceite se fríe y con pan se come",
                palabra: "HUEVO"
            },
            {
                pista: "Oro parece, plata no es, el que no lo adivine bien tonto es",
                palabra: "PLATA"
            },
            {
                pista: "Redondo redondo, barril sin fondo, ¿qué es?",
                palabra: "ANILL"
            },
            {
                pista: "Sin pies ni cabeza, y con cuello y sombrero",
                palabra: "HONGO"
            },
            {
                pista: "Va con la gente al mercado y sin embargo no se moja",
                palabra: "SOMBR"
            },
            {
                pista: "Del cielo baje y en el suelo caí, sin ser ave ni tener alas",
                palabra: "LLUVI"
            },
            {
                pista: "Tiene dientes y no come, tiene cabeza y no es hombre",
                palabra: "AJOSS"
            },
            {
                pista: "Blanco fue mi nacimiento, verde mi crecimiento, rojo mi vivir y negro mi fallecimiento",
                palabra: "UVASS"
            }
        ];
        
        // Variables de estado del juego
        let acertijosDisponibles = [];
        let acertijoActual = null;
        let palabraActual = "";
        let intentoActual = 0;
        let posicionActual = 0;
        let juegoTerminado = false;
        let acertijosMostrados = 0;
        let acertijosResueltos = 0;
        
        // Elementos DOM
        const tablero = document.getElementById("tablero");
        const acertijoElement = document.getElementById("acertijo");
        const teclado = document.getElementById("teclado");
        const mensaje = document.getElementById("mensaje");
        const mensajeTitulo = document.getElementById("mensaje-titulo");
        const mensajeTexto = document.getElementById("mensaje-texto");
        const siguienteBtn = document.getElementById("siguiente-btn");
        const reiniciarBtn = document.getElementById("reiniciar-btn");
        const contadorIntentos = document.getElementById("contador-intentos");
        const contadorAcertijos = document.getElementById("contador-acertijos");
        const contadorResueltos = document.getElementById("contador-resueltos");
        
        // Inicializar el juego
        function inicializarJuego() {
            // Reiniciar acertijos disponibles
            acertijosDisponibles = [...todosAcertijos];
            acertijosMostrados = 0;
            acertijosResueltos = 0;
            
            // Actualizar contadores
            contadorAcertijos.textContent = acertijosMostrados;
            contadorResueltos.textContent = acertijosResueltos;
            
            // Seleccionar siguiente acertijo
            seleccionarSiguienteAcertijo();
        }
        
        // Seleccionar un acertijo que no se haya mostrado
        function seleccionarSiguienteAcertijo() {
            if (acertijosDisponibles.length === 0) {
                // Si no hay más acertijos disponibles
                juegoTerminado = true;
                mensajeTitulo.textContent = "¡Felicidades!";
                mensajeTexto.textContent = "Has completado todos los acertijos. ¡Juego terminado!";
                siguienteBtn.style.display = "none";
                mensaje.style.display = "block";
                return;
            }
            
            // Seleccionar un acertijo aleatorio de los disponibles
            const indiceAleatorio = Math.floor(Math.random() * acertijosDisponibles.length);
            acertijoActual = acertijosDisponibles[indiceAleatorio];
            palabraActual = acertijoActual.palabra;
            
            // Eliminar el acertijo de los disponibles
            acertijosDisponibles.splice(indiceAleatorio, 1);
            
            // Mostrar el acertijo
            acertijoElement.textContent = acertijoActual.pista;
            
            // Reiniciar variables
            intentoActual = 0;
            posicionActual = 0;
            juegoTerminado = false;
            contadorIntentos.textContent = "Intentos: 0/7";
            
            // Incrementar contador de acertijos mostrados
            acertijosMostrados++;
            contadorAcertijos.textContent = acertijosMostrados;
            
            // Limpiar el tablero
            tablero.innerHTML = "";
            
            // Crear las filas y letras
            for (let i = 0; i < 7; i++) {
                const fila = document.createElement("div");
                fila.className = "fila";
                
                for (let j = 0; j < 5; j++) {
                    const letra = document.createElement("div");
                    letra.className = "letra";
                    letra.dataset.fila = i;
                    letra.dataset.col = j;
                    fila.appendChild(letra);
                }
                
                tablero.appendChild(fila);
            }
            
            // Reiniciar teclado
            document.querySelectorAll('.tecla').forEach(tecla => {
                tecla.classList.remove('correcta', 'presente', 'ausente');
            });
            
            // Ocultar mensaje
            mensaje.style.display = "none";
            
            // Configurar event listeners para el teclado virtual
            document.querySelectorAll(".tecla").forEach(tecla => {
                tecla.addEventListener("click", () => {
                    if (juegoTerminado) return;
                    
                    const letra = tecla.dataset.tecla;
                    
                    if (letra === "ENTER") {
                        comprobarPalabra();
                    } else if (letra === "DELETE") {
                        eliminarLetra();
                    } else {
                        agregarLetra(letra);
                    }
                });
            });
            
            // Configurar event listener para el teclado físico
            document.addEventListener("keydown", manejarTeclado);
        }
        
        // Manejar eventos del teclado físico
        function manejarTeclado(e) {
            if (juegoTerminado) return;
            
            if (e.key === "Enter") {
                comprobarPalabra();
            } else if (e.key === "Backspace") {
                eliminarLetra();
            } else if (/^[A-Za-zñÑ]$/.test(e.key)) {
                agregarLetra(e.key.toUpperCase());
            }
        }
        
        // Agregar una letra al tablero
        function agregarLetra(letra) {
            if (posicionActual < 5 && intentoActual < 7) {
                const casilla = document.querySelector(`.letra[data-fila="${intentoActual}"][data-col="${posicionActual}"]`);
                casilla.textContent = letra;
                posicionActual++;
            }
        }
        
        // Eliminar una letra del tablero
        function eliminarLetra() {
            if (posicionActual > 0) {
                posicionActual--;
                const casilla = document.querySelector(`.letra[data-fila="${intentoActual}"][data-col="${posicionActual}"]`);
                casilla.textContent = "";
            }
        }
        
        // Comprobar si la palabra es correcta
        function comprobarPalabra() {
            if (posicionActual !== 5) {
                alert("¡Completa la palabra antes de enviar!");
                return;
            }
            
            const fila = document.querySelectorAll(`.fila:nth-child(${intentoActual + 1}) .letra`);
            let palabraIntento = "";
            
            // Obtener la palabra del intento actual
            for (let i = 0; i < 5; i++) {
                palabraIntento += fila[i].textContent;
            }
            
            // Verificar cada letra
            for (let i = 0; i < 5; i++) {
                const letra = fila[i].textContent;
                let estado = "ausente";
                
                if (palabraActual[i] === letra) {
                    estado = "correcta";
                } else if (palabraActual.includes(letra)) {
                    estado = "presente";
                }
                
                // Aplicar animación y color después de un delay
                setTimeout(() => {
                    fila[i].classList.add("animacion", estado);
                    
                    // Actualizar teclado virtual
                    const tecla = document.querySelector(`.tecla[data-tecla="${letra}"]`);
                    if (!tecla.classList.contains("correcta")) {
                        tecla.classList.remove("presente", "ausente");
                        tecla.classList.add(estado);
                    }
                }, i * 300);
            }
            
            // Actualizar contador de intentos
            intentoActual++;
            contadorIntentos.textContent = `Intentos: ${intentoActual}/7`;
            
            // Comprobar si ganó o perdió
            if (palabraIntento === palabraActual) {
                setTimeout(() => {
                    juegoTerminado = true;
                    acertijosResueltos++;
                    contadorResueltos.textContent = acertijosResueltos;
                    
                    mensajeTitulo.textContent = "¡Felicidades!";
                    mensajeTexto.textContent = `Has acertado la palabra "${palabraActual}" en ${intentoActual} intento${intentoActual > 1 ? 's' : ''}.`;
                    siguienteBtn.style.display = "block";
                    mensaje.style.display = "block";
                }, 2000);
            } else if (intentoActual === 7) {
                setTimeout(() => {
                    juegoTerminado = true;
                    mensajeTitulo.textContent = "¡Game Over!";
                    mensajeTexto.textContent = `La palabra era "${palabraActual}". ¡Inténtalo de nuevo!`;
                    siguienteBtn.style.display = "block";
                    mensaje.style.display = "block";
                }, 2000);
            } else {
                // Preparar para el siguiente intento
                setTimeout(() => {
                    posicionActual = 0;
                }, 2000);
            }
        }
        
        // Configurar botón para siguiente acertijo
        siguienteBtn.addEventListener("click", () => {
            mensaje.style.display = "none";
            seleccionarSiguienteAcertijo();
        });
        
        // Configurar botón para reiniciar juego
        reiniciarBtn.addEventListener("click", inicializarJuego);
        
        // Iniciar el juego
        inicializarJuego();
    </script>
</body>
</html>
